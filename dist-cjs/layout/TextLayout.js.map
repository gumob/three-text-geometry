{"version":3,"file":"dist-cjs/layout/TextLayout.js.map","sources":["../../src/layout/TextLayout.ts"],"names":["layout_1","require","types_1","TextLayout","X_HEIGHTS","M_WIDTHS","CAP_HEIGHTS","TAB_ID","charCodeAt","SPACE_ID","_opt","font","undefined","letterSpacing","tabSize","lineHeight","align","start","end","width","mode","measure","_fallbackSpaceGlyph","_fallbackTabGlyph","_glyphs","_width","_height","_descender","_ascender","_xHeight","_baseline","_capHeight","_lineHeight","option","this","glyphs","height","descender","ascender","xHeight","baseline","capHeight","toString","length","constructor","text","TypeError","update","Math","max","TextAlign","Left","common","computeMetrics","bind","_setupSpaceGlyphs","lines","WordWrap","minWidth","maxLineWidth","reduce","prev","line","let","x","y","base","getXHeight","getCapHeight","lineIndex","lineWidth","lastGlyph","i","id","glyph","getGlyph","getKerning","tx","Center","Right","push","position","data","index","xadvance","chars","space","getGlyphById","getMGlyph","tabWidth","Object","assign","xoffset","yoffset","curPen","curWidth","count","min","kern","nextPen","nextWidth","glyphIdx","findChar","idx","left","right","kernings","table","first","second","amount","array","value","exports"],"mappings":"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"}