{"version":3,"file":"dist-cjs/layout/TextLayout.js.map","sources":["../../src/layout/TextLayout.ts"],"names":["let","layout_1","require","types_1","TextLayout","text","this","_text","value","update","_opt","option","glyphs","_a","_glyphs","width","_width","height","_height","descender","_descender","ascender","_ascender","xHeight","_xHeight","baseline","_baseline","capHeight","_capHeight","lineHeight","_lineHeight","toString","length","constructor","font","undefined","letterSpacing","tabSize","align","start","end","mode","measure","_fallbackSpaceGlyph","_fallbackTabGlyph","TypeError","Math","max","TextAlign","Left","common","computeMetrics","bind","_setupSpaceGlyphs","lines","WordWrap","minWidth","maxLineWidth","reduce","prev","line","x","y","base","getXHeight","getCapHeight","lineIndex","lineWidth","lastGlyph","i","id","charCodeAt","glyph","getGlyph","getKerning","tx","Center","Right","push","position","data","index","xadvance","chars","space","getGlyphById","SPACE_ID","getMGlyph","tabWidth","Object","assign","TAB_ID","xoffset","yoffset","curPen","curWidth","count","min","kern","nextPen","nextWidth","glyphIdx","findChar","X_HEIGHTS","idx","M_WIDTHS","CAP_HEIGHTS","left","right","kernings","table","first","second","amount","array","exports"],"mappings":"iFAAAA,IAAAC,SAAAC,QAAA,WAAA,EACAC,QAAAD,QAAA,UAAA,QAiBME,WAyCJC,WACE,OAAOC,KAAKC,KACd,CAOAF,SAAgBG,GACdF,KAAKC,MAAQC,EACbF,KAAKG,OAAOD,EAAOF,KAAKI,IAAI,CAC9B,CAOAC,aACE,MAAO,CAAE,GAAGL,KAAKI,IAAI,CACvB,CAOAC,WAAkBH,GAChBF,KAAKI,KAAO,CAAE,GAAGF,CAAK,EACtBF,KAAKG,OAAOH,KAAKC,MAAOD,KAAKI,IAAI,CACnC,CAQAE,a,MACE,OAAO,OAAAC,EAAAP,KAAKQ,SAAOD,EAAI,EACzB,CAQAE,Y,MACE,OAAO,OAAAF,EAAAP,KAAKU,QAAMH,EAAI,CACxB,CAQAI,a,MACE,OAAO,OAAAJ,EAAAP,KAAKY,SAAOL,EAAI,CACzB,CAQAM,gB,MACE,OAAO,OAAAN,EAAAP,KAAKc,YAAUP,EAAI,CAC5B,CAQAQ,e,MACE,OAAO,OAAAR,EAAAP,KAAKgB,WAAST,EAAI,CAC3B,CAQAU,c,MACE,OAAO,OAAAV,EAAAP,KAAKkB,UAAQX,EAAI,CAC1B,CAQAY,e,MACE,OAAO,OAAAZ,EAAAP,KAAKoB,WAASb,EAAI,CAC3B,CAQAc,gB,MACE,OAAO,OAAAd,EAAAP,KAAKsB,YAAUf,EAAI,CAC5B,CAQAgB,iB,MACE,OAAO,OAAAhB,EAAAP,KAAKwB,aAAWjB,EAAI,CAC7B,CAOOkB,WACL;YACQzB,KAAKM,OAAOoB;WACb1B,KAAKS;YACJT,KAAKW;eACFX,KAAKa;cACNb,KAAKe;aACNf,KAAKiB;cACJjB,KAAKmB;eACJnB,KAAKqB;gBACJrB,KAAKuB;EAEnB,CASAI,YAAY5B,EAAcM,EAAc,IACtC,GAxLML,KAAAC,MAAgB,GAEhBD,KAAAI,KAAyB,CAC/BwB,KAAMC,KAAAA,EACNC,cAAeD,KAAAA,EACfE,QAASF,KAAAA,EACTN,WAAYM,KAAAA,EACZG,MAAOH,KAAAA,EACPI,MAAOJ,KAAAA,EACPK,IAAKL,KAAAA,EACLpB,MAAOoB,KAAAA,EACPM,KAAMN,KAAAA,EACNO,QAASP,KAAAA,C,EAIH7B,KAAAqC,oBAAyC,KACzCrC,KAAAsC,kBAAuC,KAuKzBT,KAAAA,IAAhBxB,EAAOuB,KAAoB,MAAM,IAAIW,UAAU,kCAAkC,EACrFvC,KAAKI,KAAKwB,KAAOvB,EAAOuB,KACxB5B,KAAKG,OAAOJ,EAAMM,CAAM,CAC1B,CAQOF,OAAOJ,EAAeM,GAC3BL,KAAKC,MAAQF,MAAAA,EAAAA,EAAQC,KAAKC,MAE1BD,KAAKQ,QAAU,GACfR,KAAKU,OAAS,EACdV,KAAKY,QAAU,EACfZ,KAAKc,WAAa,EAClBd,KAAKgB,UAAY,EACjBhB,KAAKkB,SAAW,EAChBlB,KAAKoB,UAAY,EACjBpB,KAAKsB,WAAa,EAClBtB,KAAKwB,YAAc,EAEfnB,IACkBwB,KAAAA,IAAhBxB,EAAOuB,OAAoB5B,KAAKI,KAAKwB,KAAOvB,EAAOuB,MACvB5B,KAAKI,KAAK6B,MAArBJ,KAAAA,IAAjBxB,EAAO4B,MAAuCO,KAAKC,IAAI,EAAGpC,EAAO4B,KAAK,EACnD,EACOjC,KAAKI,KAAK8B,IAArBL,KAAAA,IAAfxB,EAAO6B,IAAmC7B,EAAO6B,IAChClC,KAAKC,MAAMyB,OACXG,KAAAA,IAAjBxB,EAAOI,QAAqBT,KAAKI,KAAKK,MAAQJ,EAAOI,OACzBT,KAAKI,KAAK4B,MAArBH,KAAAA,IAAjBxB,EAAO2B,MAAuC3B,EAAO2B,MAClCnC,QAAA6C,UAAUC,KACbd,KAAAA,IAAhBxB,EAAO8B,OAAoBnC,KAAKI,KAAK+B,KAAO9B,EAAO8B,MACfnC,KAAKI,KAAK0B,cAArBD,KAAAA,IAAzBxB,EAAOyB,cAAuDzB,EAAOyB,cAC1C,EACM9B,KAAKI,KAAKmB,YAArBM,KAAAA,IAAtBxB,EAAOkB,WAAiDlB,EAChCL,KAAKI,KAAKwB,KAAMgB,QADuBrB,WAEjCvB,KAAKI,KAAK2B,QAArBF,KAAAA,IAAnBxB,EAAO0B,QAA2C1B,EAAO0B,QACpC,EACzB/B,KAAKI,KAAKgC,QAAUpC,KAAK6C,eAAeC,KAAK9C,IAAI,EACjDA,KAAK+C,kBAAkB/C,KAAKI,KAAKwB,KAAO5B,KAAKI,KAAK2B,OAAQ,GAG5D,IAAMH,EAAe5B,KAAKI,KAAKwB,KAEzBoB,GAAAA,IAAYrD,SAAAsD,UAAWD,MAAMhD,KAAKC,MAAOD,KAAKI,IAAI,EAClD8C,EAAWlD,KAAKI,KAAKK,OAAS,EAG9B0C,EAAeH,EAAMI,OAAO,CAACC,EAAcC,IACxCd,KAAKC,IAAIY,EAAMC,EAAK7C,MAAOyC,CAAQ,EACzC,CAAC,EAGAK,EAAI,EACJC,EAAI,EACR,IAAMjC,EAAqBvB,KAAKI,KAAKmB,WAE/BV,EAAoBU,GAAaJ,EADdS,EAAKgB,OAAOa,MAE/B3B,EAAwB9B,KAAKI,KAAK0B,cAClCnB,EAAiBY,EAAayB,EAAMtB,OAASb,EAC7CmB,EAAmBhC,KAAKI,KAAK4B,MAMnChC,KAAKU,OAASyC,EACdnD,KAAKY,QAAUD,EACfX,KAAKc,WAAaS,EAAaJ,EAC/BnB,KAAKoB,UAAYD,EACjBnB,KAAKkB,SAAWlB,KAAK0D,WAAW9B,CAAI,EACpC5B,KAAKsB,WAAatB,KAAK2D,aAAa/B,CAAI,EACxC5B,KAAKwB,YAAcD,EACnBvB,KAAKgB,UAAYO,EAAaV,EAAYb,KAAKkB,SAG/C,IAAKxB,IAAIkE,EAAY,EAAGA,EAAYZ,EAAMtB,OAAQkC,CAAS,GAAI,CAC7D,IAAMN,EAAoBN,EAAMY,GAC1B3B,EAAQqB,EAAKrB,MACbC,EAAMoB,EAAKpB,IACX2B,EAAYP,EAAK7C,MACnBqD,EAAYjC,KAAAA,EAEhB,IAAKnC,IAAIqE,EAAI9B,EAAO8B,EAAI7B,EAAK6B,CAAC,GAAI,CAChC,IAAMC,EAAKhE,KAAKC,MAAMgE,WAAWF,CAAC,EAElC,GAAIG,EADUlE,KAAKmE,SAASvC,EAAMoC,CAAE,EACzB,CACLF,IAAWP,GAAKvD,KAAKoE,WAAWxC,EAAMkC,EAAUE,GAAIE,EAAMF,EAAE,GAEhEtE,IAAI2E,EAAKd,EACLvB,IAAUnC,QAAA6C,UAAU4B,OAAQD,IAAOlB,EAAeU,GAAa,EAC1D7B,IAAUnC,QAAA6C,UAAU6B,QAAOF,GAAMlB,EAAeU,GAEzD7D,KAAKQ,QAAQgE,KAAK,CAChBC,SAAU,CAACJ,EAAIb,GACfkB,KAAMR,EACNS,MAAOZ,EACPT,KAAMM,C,CACP,EAGDL,GAAKW,EAAMU,SAAW9C,EACtBgC,EAAYI,CACd,CACF,CAGAV,GAAKjC,EACLgC,EAAI,CACN,CACF,CAQQR,kBAAkBnB,EAAcG,GAGtC/B,KAAKqC,oBAAsB,KAC3BrC,KAAKsC,kBAAoB,KAEpBV,EAAKiD,OAA+B,IAAtBjD,EAAKiD,MAAMnD,SAKxBoD,EAAQ9E,KAAK+E,aAAanD,EAAM9B,WAAWkF,QAAQ,GAAKhF,KAAKiF,UAAUrD,CAAI,GAAKA,EAAKiD,MAAM,MAG3FK,GAA6BJ,EAAMF,SACzC5E,KAAKqC,oBAAsB,CAAE,GAAGyC,CAAK,EACrC9E,KAAKsC,kBAAoB6C,OAAOC,OAC9B,CAAE,GAAGN,CAAK,EACV,CACEvB,EAAG,EACHC,EAAG,EACHoB,SAAUM,EACVlB,GAAIlE,WAAWuF,OACfC,QAAS,EACTC,QAAS,EACT9E,MAAO,EACPE,OAAQ,C,CACT,EAEL,CASQwD,SAASvC,EAAcoC,GAE7B,OADME,EAAQlE,KAAK+E,aAAanD,EAAMoC,CAAE,KAE/BA,IAAOlE,WAAWuF,OAAerF,KAAKsC,kBACtC0B,IAAOlE,WAAWkF,SAAiBhF,KAAKqC,oBAC1C,KACT,CAWQQ,eAAe9C,EAAckC,EAAeC,EAAazB,GAC/D,IAAMqB,EAAgB9B,KAAKI,KAAK0B,eAAiB,EAC3CF,EAAO5B,KAAKI,KAAKwB,KACnB4D,EAAS,EACTC,EAAW,EACXC,EAAQ,EAEZ,GAAI,CAAC9D,GAAQ,CAACA,EAAKiD,OAA+B,IAAtBjD,EAAKiD,MAAMnD,OACrC,MAAO,CACLO,MAAOA,EACPC,IAAKD,EACLxB,MAAO,C,EAIXyB,EAAMM,KAAKmD,IAAI5F,EAAK2B,OAAQQ,CAAG,EAC/BxC,IAAIoE,EACJ,IAAKpE,IAAIqE,EAAI9B,EAAO8B,EAAI7B,EAAK6B,CAAC,GAAI,CAChC,IAAMC,EAAKjE,EAAKkE,WAAWF,CAAC,EAG5B,GAAIG,EAF6BlE,KAAKmE,SAASvC,EAAMoC,CAAE,EAE5C,CAGT,IAAM4B,EAAO9B,EAAY9D,KAAKoE,WAAWxC,EAAMkC,EAAUE,GAAIE,EAAMF,EAAE,EAAI,EAGnE6B,GAFNL,GAAUI,GAEe1B,EAAMU,SAAW9C,EACpCgE,EAAYN,EAAStB,EAAMzD,MAGjC,GAAiBA,GAAbqF,GAAiCrF,GAAXoF,EAAkB,MAG5CL,EAASK,EACTJ,EAAWK,EACXhC,EAAYI,CACd,CACAwB,CAAK,EACP,CAIA,OADI5B,IAAW2B,GAAY3B,EAAUwB,SAC9B,CACLrD,MAAOA,EACPC,IAAKD,EAAQyD,EACbjF,MAAOgF,C,CAEX,CASQV,aAAanD,EAAcoC,GACjC,OAAKpC,EAAKiD,OAA+B,IAAtBjD,EAAKiD,MAAMnD,QAEd,IADVqE,EAAW/F,KAAKgG,SAASpE,EAAKiD,MAAOb,CAAE,GACnBpC,EAAKiD,MAAMkB,GAFrC,KAAA,CAIF,CAQQrC,WAAW9B,GACjB,IAAKlC,IAAIqE,EAAI,EAAGA,EAAIjE,WAAWmG,UAAUvE,OAAQqC,CAAC,GAAI,CACpD,IAAMC,EAAKlE,WAAWmG,UAAUlC,GAAIE,WAAW,CAAC,EAEhD,GAAW,IAAPiC,EADQlG,KAAKgG,SAASpE,EAAKiD,MAAOb,CAAE,GAC1B,OAAOpC,EAAKiD,MAAMqB,GAAMvF,MACxC,CACA,OAAO,CACT,CAQQsE,UAAUrD,GAChB,IAAKlC,IAAIqE,EAAI,EAAGA,EAAIjE,WAAWqG,SAASzE,OAAQqC,CAAC,GAAI,CACnD,IAAMC,EAAKlE,WAAWqG,SAASpC,GAAIE,WAAW,CAAC,EAE/C,GAAW,IAAPiC,EADQlG,KAAKgG,SAASpE,EAAKiD,MAAOb,CAAE,GAC1B,OAAOpC,EAAKiD,MAAMqB,EAClC,CAEF,CAQQvC,aAAa/B,GACnB,IAAKlC,IAAIqE,EAAI,EAAGA,EAAIjE,WAAWsG,YAAY1E,OAAQqC,CAAC,GAAI,CACtD,IAAMC,EAAKlE,WAAWsG,YAAYrC,GAAIE,WAAW,CAAC,EAElD,GAAW,IAAPiC,EADQlG,KAAKgG,SAASpE,EAAKiD,MAAOb,CAAE,GAC1B,OAAOpC,EAAKiD,MAAMqB,GAAMvF,MACxC,CACA,OAAO,CACT,CAUQyD,WAAWxC,EAAcyE,EAAcC,GAC7C,GAAK1E,EAAK2E,UAAqC,IAAzB3E,EAAK2E,SAAS7E,OAApC,CACA,IAAM8E,EAAQ5E,EAAK2E,SACnB,IAAK7G,IAAIqE,EAAI,EAAGA,EAAIyC,EAAM9E,OAAQqC,CAAC,GAAI,CACrC,IAAM6B,EAAOY,EAAMzC,GACnB,GAAI6B,EAAKa,QAAUJ,GAAQT,EAAKc,SAAWJ,EAAO,OAAOV,EAAKe,MAChE,CAL0D,CAM1D,OAAO,CACT,CASQX,SAASY,EAAqB1G,GACpC,IAAKR,IAAIqE,EAAI,EAAGA,EAAI6C,EAAMlF,OAAQqC,CAAC,GACjC,GAAI6C,EAAM7C,GAAIC,KAAO9D,EAAO,OAAO6D,EAErC,MAAO,CAAC,CACV,C,EAGO8C,QAAA/G,WAAAA,YA3fSmG,UAAY,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACzEnG,WAAAqG,SAAW,CAAC,IAAK,KACjBrG,WAAAsG,YAAc,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAChFtG,WAAAuF,OAAS,KAAKpB,WAAW,CAAC,EAC1BnE,WAAAkF,SAAW,IAAIf,WAAW,CAAC"}