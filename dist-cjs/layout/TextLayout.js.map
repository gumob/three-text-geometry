{"version":3,"file":"dist-cjs/layout/TextLayout.js.map","sources":["../../src/layout/TextLayout.ts"],"names":["layout_1","require","types_1","TextLayout","option","this","_opt","glyphs","_a","_glyphs","width","_width","height","_height","descender","_descender","ascender","_ascender","xHeight","_xHeight","baseline","_baseline","capHeight","_capHeight","lineHeight","_lineHeight","toString","length","constructor","text","font","undefined","letterSpacing","tabSize","align","start","end","mode","measure","_fallbackSpaceGlyph","_fallbackTabGlyph","TypeError","update","Math","max","TextAlign","Left","common","computeMetrics","bind","_setupSpaceGlyphs","lines","WordWrap","minWidth","maxLineWidth","reduce","prev","line","let","x","y","base","getXHeight","getCapHeight","lineIndex","lineWidth","lastGlyph","i","id","charCodeAt","glyph","getGlyph","getKerning","tx","Center","Right","push","position","data","index","xadvance","chars","space","getGlyphById","SPACE_ID","getMGlyph","tabWidth","Object","assign","TAB_ID","xoffset","yoffset","curPen","curWidth","count","min","kern","nextPen","nextWidth","glyphIdx","findChar","X_HEIGHTS","idx","M_WIDTHS","CAP_HEIGHTS","left","right","kernings","table","first","second","amount","array","value","exports"],"mappings":"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"}