{"version":3,"file":"dist-cjs/layout/TextLayout.js.map","sources":["../../src/layout/TextLayout.ts"],"names":["layout_1","require","types_1","TextLayout","text","this","_text","value","update","_opt","option","glyphs","_a","_glyphs","width","_width","height","_height","descender","_descender","ascender","_ascender","xHeight","_xHeight","baseline","_baseline","capHeight","_capHeight","lineHeight","_lineHeight","toString","length","constructor","font","undefined","letterSpacing","tabSize","align","start","end","mode","measure","_fallbackSpaceGlyph","_fallbackTabGlyph","TypeError","Math","max","TextAlign","Left","common","computeMetrics","bind","_setupSpaceGlyphs","lines","WordWrap","minWidth","maxLineWidth","reduce","prev","line","let","x","y","base","getXHeight","getCapHeight","lineIndex","lineWidth","lastGlyph","i","id","charCodeAt","glyph","getGlyph","getKerning","tx","Center","Right","push","position","data","index","xadvance","chars","space","getGlyphById","SPACE_ID","getMGlyph","tabWidth","Object","assign","TAB_ID","xoffset","yoffset","curPen","curWidth","count","min","kern","nextPen","nextWidth","glyphIdx","findChar","X_HEIGHTS","idx","M_WIDTHS","CAP_HEIGHTS","left","right","kernings","table","first","second","amount","array","exports"],"mappings":"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"}