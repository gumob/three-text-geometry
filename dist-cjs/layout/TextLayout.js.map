{"version":3,"file":"dist-cjs/layout/TextLayout.js.map","sources":["../../src/layout/TextLayout.ts"],"names":["layout_1","require","types_1","TextLayout","constructor","text","option","this","_opt","font","undefined","letterSpacing","tabSize","lineHeight","align","start","end","width","mode","measure","_fallbackSpaceGlyph","_fallbackTabGlyph","TypeError","update","glyphs","_a","_glyphs","_width","height","_height","descender","_descender","ascender","_ascender","xHeight","_xHeight","baseline","_baseline","capHeight","_capHeight","_lineHeight","toString","length","Math","max","TextAlign","Left","common","computeMetrics","bind","_setupSpaceGlyphs","lines","WordWrap","minWidth","maxLineWidth","reduce","prev","line","let","x","y","base","getXHeight","getCapHeight","lineIndex","lineWidth","lastGlyph","i","id","charCodeAt","glyph","getGlyph","getKerning","tx","Center","Right","push","position","data","index","xadvance","chars","space","getGlyphById","SPACE_ID","getMGlyph","tabWidth","Object","assign","TAB_ID","xoffset","yoffset","curPen","curWidth","count","min","kern","nextPen","nextWidth","glyphIdx","findChar","X_HEIGHTS","idx","M_WIDTHS","CAP_HEIGHTS","left","right","kernings","table","first","second","amount","array","value","exports"],"mappings":"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"}