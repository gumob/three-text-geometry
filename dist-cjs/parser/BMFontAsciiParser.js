Object.defineProperty(exports,"__esModule",{value:!0}),exports.BMFontAsciiParser=void 0;let error_1=require("../error"),types_1=require("../types");class BMFontAsciiParser{parse(r){r=(r=r.trim()).split(/\r\n?|\n/g);if(0===r.length)throw new error_1.BMFontError("No data in BMFont file");let i=(0,types_1.DefaultBMFont)();if(r.forEach((r,e)=>{if(r=r.replace(/[\s\t]+/g," ").trim()){var o=r.indexOf(" ");if(-1===o)throw new error_1.BMFontError("No page data");var s=r.substring(0,o);let t={};switch(r.substring(o+1).replace(/[\s\t]+/g," ").split(" ").forEach(r=>{var r=r.split("="),e=r[0],r=r[1];/^-?\d+\.?\d*$/.test(r)?t[e]=+r:/^[\d,]+/.test(r)?t[e]=r.split(",").map(r=>+r):/^("|').*("|')$/.test(r)?t[e]=r.replace(/^("|')(.*)("|')$/g,"$2"):t[e]=r}),s){case"info":i.info=t;break;case"common":i.common=t;break;case"distanceField":i.distanceField=t;break;case"page":i.pages.push(t.file);break;case"chars":break;case"char":i.chars.push(t);break;case"kernings":break;case"kerning":i.kernings.push(t)}}}),JSON.stringify(i.info)===JSON.stringify((0,types_1.DefaultBMFontInfo)()))throw new error_1.BMFontError(`No info data. 
`+JSON.stringify(i));if(JSON.stringify(i.common)===JSON.stringify((0,types_1.DefaultBMFontCommon)()))throw new error_1.BMFontError(`No common data. 
`+JSON.stringify(i));if(0==i.pages.length)throw new error_1.BMFontError(`No page data. 
`+JSON.stringify(i));if(0==i.chars.length)throw new error_1.BMFontError(`No char data. 
`+JSON.stringify(i));return i}}exports.BMFontAsciiParser=BMFontAsciiParser;