"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BMFontAsciiParser=void 0;const error_1=require("../error"),types_1=require("../types");class BMFontAsciiParser{parse(r){const e=(r=r.trim()).split(/\r\n?|\n/g);if(0===e.length)throw new error_1.BMFontError("No data in BMFont file");const n=(0,types_1.DefaultBMFont)();if(e.forEach((r,e)=>{if(r=r.replace(/[\s\t]+/g," ").trim()){var t=r.indexOf(" ");if(-1===t)throw new error_1.BMFontError("No page data");var s=r.substring(0,t);const o={};switch(r.substring(t+1).replace(/[\s\t]+/g," ").split(" ").forEach(r=>{var e=r.split("="),r=e[0];const t=e[1];/^-?\d+\.?\d*$/.test(t)?o[r]=+t:/^[\d,]+/.test(t)?o[r]=t.split(",").map(r=>+r):/^("|').*("|')$/.test(t)?o[r]=t.replace(/^("|')(.*)("|')$/g,"$2"):o[r]=t}),s){case"info":n.info=o;break;case"common":n.common=o;break;case"distanceField":n.distanceField=o;break;case"page":n.pages.push(o.file);break;case"chars":break;case"char":n.chars.push(o);break;case"kernings":break;case"kerning":n.kernings.push(o)}}}),JSON.stringify(n.info)===JSON.stringify((0,types_1.DefaultBMFontInfo)()))throw new error_1.BMFontError(`No info data. 
`+JSON.stringify(n));if(JSON.stringify(n.common)===JSON.stringify((0,types_1.DefaultBMFontCommon)()))throw new error_1.BMFontError(`No common data. 
`+JSON.stringify(n));if(0==n.pages.length)throw new error_1.BMFontError(`No page data. 
`+JSON.stringify(n));if(0==n.chars.length)throw new error_1.BMFontError(`No char data. 
`+JSON.stringify(n));return n}}exports.BMFontAsciiParser=BMFontAsciiParser;