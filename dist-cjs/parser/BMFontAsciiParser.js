Object.defineProperty(exports,"__esModule",{value:!0}),exports.BMFontAsciiParser=void 0;let error_1=require("../error"),types_1=require("../types");class BMFontAsciiParser{parse(r){if(0===(r=(r=r.trim()).split(/\r\n?|\n/g)).length)throw new error_1.BMFontError("No data in BMFont file");let s=(0,types_1.DefaultBMFont)();if(r.forEach((e,r)=>{if(e=e.replace(/[\s\t]+/g," ").trim()){var o=e.indexOf(" ");if(-1===o)throw new error_1.BMFontError("No page data");let r=e.substring(0,o),t={};switch(e.substring(o+1).replace(/[\s\t]+/g," ").split(" ").forEach(r=>{var e=(r=r.split("="))[0],r=r[1];/^-?\d+\.?\d*$/.test(r)?t[e]=+r:/^[\d,]+/.test(r)?t[e]=r.split(",").map(r=>+r):/^("|').*("|')$/.test(r)?t[e]=r.replace(/^("|')(.*)("|')$/g,"$2"):t[e]=r}),r){case"info":s.info=t;break;case"common":s.common=t;break;case"distanceField":s.distanceField=t;break;case"page":s.pages.push(t.file);break;case"chars":break;case"char":s.chars.push(t);break;case"kernings":break;case"kerning":s.kernings.push(t)}}}),JSON.stringify(s.info)===JSON.stringify((0,types_1.DefaultBMFontInfo)()))throw new error_1.BMFontError(`No info data. 
`+JSON.stringify(s));if(JSON.stringify(s.common)===JSON.stringify((0,types_1.DefaultBMFontCommon)()))throw new error_1.BMFontError(`No common data. 
`+JSON.stringify(s));if(0==s.pages.length)throw new error_1.BMFontError(`No page data. 
`+JSON.stringify(s));if(0==s.chars.length)throw new error_1.BMFontError(`No char data. 
`+JSON.stringify(s));return s}}exports.BMFontAsciiParser=BMFontAsciiParser;