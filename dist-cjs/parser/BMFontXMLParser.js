Object.defineProperty(exports,"__esModule",{value:!0}),exports.BMFontXMLParser=void 0;let fast_xml_parser_1=require("fast-xml-parser"),error_1=require("../error");class BMFontXMLParser{parse(e){try{var o=new fast_xml_parser_1.XMLParser({ignoreAttributes:!1,attributeNamePrefix:""}).parse(e).font;if(!o)throw new error_1.BMFontError("No font data in BMFont file");if(!o.pages)throw new error_1.BMFontError("No font data in BMFont file");if(!o.chars)throw new error_1.BMFontError("No chars data in BMFont file");if(!o.info)throw new error_1.BMFontError("No info data in BMFont file");if(o.common)return{pages:Array.isArray(o.pages.page)?o.pages.page.map(e=>e.file):[o.pages.page.file],chars:o.chars.char.map(e=>e),info:{face:o.info.face,size:+o.info.size||0,bold:+o.info.bold||0,italic:+o.info.italic||0,charset:o.info.charset.split(",").filter(e=>""!=e),unicode:+o.info.unicode||0,stretchH:+o.info.stretchH||0,smooth:+o.info.smooth||0,aa:+o.info.aa||0,padding:o.info.padding.split(",").map(e=>+e),spacing:o.info.spacing.split(",").map(e=>+e),fixedHeight:+o.info.fixedHeight||0,outline:+o.info.outline||0},common:{lineHeight:+o.common.lineHeight||0,base:+o.common.base||0,scaleW:+o.common.scaleW||0,scaleH:+o.common.scaleH||0,pages:+o.common.pages||0,packed:+o.common.packed||0,alphaChnl:+o.common.alphaChnl||0,redChnl:+o.common.redChnl||0,greenChnl:+o.common.greenChnl||0,blueChnl:+o.common.blueChn||0},kernings:o.kernings.kerning.map(e=>({first:+e.first||0,second:+e.second||0,amount:+e.amount||0})),distanceField:{fieldType:o.distanceField.fieldType,distanceRange:+o.distanceField.distanceRange||0}};throw new error_1.BMFontError("No common data in BMFont file")}catch(e){throw new error_1.BMFontError(e.message)}}}exports.BMFontXMLParser=BMFontXMLParser;