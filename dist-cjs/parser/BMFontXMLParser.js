"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BMFontXMLParser=void 0;const fast_xml_parser_1=require("fast-xml-parser"),error_1=require("../error");class BMFontXMLParser{parse(o){try{var r={ignoreAttributes:!1,attributeNamePrefix:""};const c=new fast_xml_parser_1.XMLParser(r),l=c.parse(o).font;if(!l)throw new error_1.BMFontError("No font data in BMFont file");if(!l.pages)throw new error_1.BMFontError("No font data in BMFont file");if(!l.chars)throw new error_1.BMFontError("No chars data in BMFont file");if(!l.info)throw new error_1.BMFontError("No info data in BMFont file");if(!l.common)throw new error_1.BMFontError("No common data in BMFont file");let e;e=Array.isArray(l.pages.page)?l.pages.page.map(e=>e.file):[l.pages.page.file];var n=l.chars.char.map(e=>e),a={face:l.info.face,size:+l.info.size||0,bold:+l.info.bold||0,italic:+l.info.italic||0,charset:l.info.charset.split(",").filter(e=>""!=e),unicode:+l.info.unicode||0,stretchH:+l.info.stretchH||0,smooth:+l.info.smooth||0,aa:+l.info.aa||0,padding:l.info.padding.split(",").map(e=>+e),spacing:l.info.spacing.split(",").map(e=>+e),fixedHeight:+l.info.fixedHeight||0,outline:+l.info.outline||0},i={lineHeight:+l.common.lineHeight||0,base:+l.common.base||0,scaleW:+l.common.scaleW||0,scaleH:+l.common.scaleH||0,pages:+l.common.pages||0,packed:+l.common.packed||0,alphaChnl:+l.common.alphaChnl||0,redChnl:+l.common.redChnl||0,greenChnl:+l.common.greenChnl||0,blueChnl:+l.common.blueChn||0},t=l.kernings.kerning.map(e=>({first:+e.first||0,second:+e.second||0,amount:+e.amount||0})),s={fieldType:l.distanceField.fieldType,distanceRange:+l.distanceField.distanceRange||0};return{pages:e,chars:n,info:a,common:i,kernings:t,distanceField:s}}catch(e){throw new error_1.BMFontError(e.message)}}}exports.BMFontXMLParser=BMFontXMLParser;