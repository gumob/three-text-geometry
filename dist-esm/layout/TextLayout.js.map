{"version":3,"file":"dist-esm/layout/TextLayout.js.map","sources":["../../src/layout/TextLayout.ts"],"names":["WordWrap","TextAlign","TextLayout","constructor","text","option","this","_opt","font","undefined","letterSpacing","tabSize","lineHeight","align","start","end","width","mode","measure","_fallbackSpaceGlyph","_fallbackTabGlyph","TypeError","update","glyphs","_a","_glyphs","_width","height","_height","descender","_descender","ascender","_ascender","xHeight","_xHeight","baseline","_baseline","capHeight","_capHeight","_lineHeight","toString","length","Math","max","Left","common","computeMetrics","bind","_setupSpaceGlyphs","lines","minWidth","maxLineWidth","reduce","prev","line","let","x","y","base","getXHeight","getCapHeight","lineIndex","lineWidth","lastGlyph","i","id","charCodeAt","glyph","getGlyph","getKerning","tx","Center","Right","push","position","data","index","xadvance","chars","space","getGlyphById","SPACE_ID","getMGlyph","tabWidth","Object","assign","TAB_ID","xoffset","yoffset","curPen","curWidth","count","min","kern","nextPen","nextWidth","glyphIdx","findChar","X_HEIGHTS","idx","M_WIDTHS","CAP_HEIGHTS","left","right","kernings","table","first","second","amount","array","value"],"mappings":"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"}