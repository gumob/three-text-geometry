{"version":3,"file":"dist-esm/layout/TextLayout.js.map","sources":["../../src/layout/TextLayout.ts"],"names":["WordWrap","TextAlign","TextLayout","option","this","_opt","glyphs","_a","_glyphs","width","_width","height","_height","descender","_descender","ascender","_ascender","xHeight","_xHeight","baseline","_baseline","capHeight","_capHeight","lineHeight","_lineHeight","toString","length","constructor","text","font","undefined","letterSpacing","tabSize","align","start","end","mode","measure","_fallbackSpaceGlyph","_fallbackTabGlyph","TypeError","update","Math","max","Left","common","computeMetrics","bind","_setupSpaceGlyphs","lines","minWidth","maxLineWidth","reduce","prev","line","let","x","y","base","getXHeight","getCapHeight","lineIndex","lineWidth","lastGlyph","i","id","charCodeAt","glyph","getGlyph","getKerning","tx","Center","Right","push","position","data","index","xadvance","chars","space","getGlyphById","SPACE_ID","getMGlyph","tabWidth","Object","assign","TAB_ID","xoffset","yoffset","curPen","curWidth","count","min","kern","nextPen","nextWidth","glyphIdx","findChar","X_HEIGHTS","idx","M_WIDTHS","CAP_HEIGHTS","left","right","kernings","table","first","second","amount","array","value"],"mappings":"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"}