{"version":3,"file":"dist-esm/layout/TextLayout.js.map","sources":["../../src/layout/TextLayout.ts"],"names":["WordWrap","TextAlign","TextLayout","X_HEIGHTS","M_WIDTHS","CAP_HEIGHTS","TAB_ID","charCodeAt","SPACE_ID","_opt","font","undefined","letterSpacing","tabSize","lineHeight","align","start","end","width","mode","measure","_fallbackSpaceGlyph","_fallbackTabGlyph","_glyphs","_width","_height","_descender","_ascender","_xHeight","_baseline","_capHeight","_lineHeight","option","this","glyphs","height","descender","ascender","xHeight","baseline","capHeight","toString","length","constructor","text","TypeError","update","Math","max","Left","common","computeMetrics","bind","_setupSpaceGlyphs","lines","minWidth","maxLineWidth","reduce","prev","line","let","x","y","base","getXHeight","getCapHeight","lineIndex","lineWidth","lastGlyph","i","id","glyph","getGlyph","getKerning","tx","Center","Right","push","position","data","index","xadvance","chars","space","getGlyphById","getMGlyph","tabWidth","Object","assign","xoffset","yoffset","curPen","curWidth","count","min","kern","nextPen","nextWidth","glyphIdx","findChar","idx","left","right","kernings","table","first","second","amount","array","value"],"mappings":"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"}