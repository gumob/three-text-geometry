{"version":3,"file":"dist-esm/layout/TextLayout.js.map","sources":["../../src/layout/TextLayout.ts"],"names":["WordWrap","TextAlign","TextLayout","option","this","_opt","glyphs","_glyphs","width","_width","height","_height","descender","_descender","ascender","_ascender","xHeight","_xHeight","baseline","_baseline","capHeight","_capHeight","lineHeight","_lineHeight","toString","length","constructor","text","font","undefined","letterSpacing","tabSize","align","start","end","mode","measure","_fallbackSpaceGlyph","_fallbackTabGlyph","TypeError","update","Math","max","Left","common","computeMetrics","bind","_setupSpaceGlyphs","lines","minWidth","maxLineWidth","reduce","prev","line","let","x","y","base","getXHeight","getCapHeight","lineIndex","lineWidth","lastGlyph","i","id","charCodeAt","glyph","getGlyph","getKerning","tx","Center","Right","push","position","data","index","xadvance","chars","space","getGlyphById","SPACE_ID","getMGlyph","tabWidth","Object","assign","TAB_ID","xoffset","yoffset","curPen","curWidth","count","min","kern","nextPen","nextWidth","glyphIdx","findChar","X_HEIGHTS","idx","M_WIDTHS","CAP_HEIGHTS","left","right","kernings","table","first","second","amount","array","value"],"mappings":"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"}