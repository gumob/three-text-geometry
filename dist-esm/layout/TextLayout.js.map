{"version":3,"file":"dist-esm/layout/TextLayout.js.map","sources":["../../src/layout/TextLayout.ts"],"names":["WordWrap","TextAlign","TextLayout","text","this","_text","value","update","_opt","option","glyphs","_glyphs","width","_width","height","_height","descender","_descender","ascender","_ascender","xHeight","_xHeight","baseline","_baseline","capHeight","_capHeight","lineHeight","_lineHeight","toString","length","constructor","font","undefined","letterSpacing","tabSize","align","start","end","mode","measure","_fallbackSpaceGlyph","_fallbackTabGlyph","TypeError","Math","max","Left","common","computeMetrics","bind","_setupSpaceGlyphs","lines","minWidth","maxLineWidth","reduce","prev","line","x","y","base","getXHeight","getCapHeight","let","lineIndex","lineWidth","lastGlyph","i","id","charCodeAt","glyph","getGlyph","getKerning","tx","Center","Right","push","position","data","index","xadvance","chars","space","getGlyphById","SPACE_ID","getMGlyph","tabWidth","Object","assign","TAB_ID","xoffset","yoffset","curPen","curWidth","count","min","kern","nextPen","nextWidth","glyphIdx","findChar","X_HEIGHTS","idx","M_WIDTHS","CAP_HEIGHTS","left","right","kernings","table","first","second","amount","array"],"mappings":"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"}