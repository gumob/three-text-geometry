import{BMFontError}from"~/error";import{DefaultBMFont,DefaultBMFontCommon,DefaultBMFontInfo}from"~/types";class BMFontAsciiParser{parse(r){r=(r=r.trim()).split(/\r\n?|\n/g);if(0===r.length)throw new BMFontError("No data in BMFont file");let a=DefaultBMFont();if(r.forEach((r,t)=>{if(r=r.replace(/[\s\t]+/g," ").trim()){var o=r.indexOf(" ");if(-1===o)throw new BMFontError("No page data");var n=r.substring(0,o);let e={};switch(r.substring(o+1).replace(/[\s\t]+/g," ").split(" ").forEach(r=>{var r=r.split("="),t=r[0],r=r[1];/^-?\d+\.?\d*$/.test(r)?e[t]=+r:/^[\d,]+/.test(r)?e[t]=r.split(",").map(r=>+r):/^("|').*("|')$/.test(r)?e[t]=r.replace(/^("|')(.*)("|')$/g,"$2"):e[t]=r}),n){case"info":a.info=e;break;case"common":a.common=e;break;case"distanceField":a.distanceField=e;break;case"page":a.pages.push(e.file);break;case"chars":break;case"char":a.chars.push(e);break;case"kernings":break;case"kerning":a.kernings.push(e)}}}),JSON.stringify(a.info)===JSON.stringify(DefaultBMFontInfo()))throw new BMFontError(`No info data. 
`+JSON.stringify(a));if(JSON.stringify(a.common)===JSON.stringify(DefaultBMFontCommon()))throw new BMFontError(`No common data. 
`+JSON.stringify(a));if(0==a.pages.length)throw new BMFontError(`No page data. 
`+JSON.stringify(a));if(0==a.chars.length)throw new BMFontError(`No char data. 
`+JSON.stringify(a));return a}}export{BMFontAsciiParser};