import{XMLParser}from"fast-xml-parser";import{BMFontError}from"../error";class BMFontXMLParser{parse(o){try{var e=new XMLParser({ignoreAttributes:!1,attributeNamePrefix:""}).parse(o).font;if(!e)throw new BMFontError("No font data in BMFont file");if(!e.pages)throw new BMFontError("No font data in BMFont file");if(!e.chars)throw new BMFontError("No chars data in BMFont file");if(!e.info)throw new BMFontError("No info data in BMFont file");if(e.common)return{pages:Array.isArray(e.pages.page)?e.pages.page.map(o=>o.file):[e.pages.page.file],chars:e.chars.char.map(o=>o),info:{face:e.info.face,size:+e.info.size||0,bold:+e.info.bold||0,italic:+e.info.italic||0,charset:e.info.charset.split(",").filter(o=>""!=o),unicode:+e.info.unicode||0,stretchH:+e.info.stretchH||0,smooth:+e.info.smooth||0,aa:+e.info.aa||0,padding:e.info.padding.split(",").map(o=>+o),spacing:e.info.spacing.split(",").map(o=>+o),fixedHeight:+e.info.fixedHeight||0,outline:+e.info.outline||0},common:{lineHeight:+e.common.lineHeight||0,base:+e.common.base||0,scaleW:+e.common.scaleW||0,scaleH:+e.common.scaleH||0,pages:+e.common.pages||0,packed:+e.common.packed||0,alphaChnl:+e.common.alphaChnl||0,redChnl:+e.common.redChnl||0,greenChnl:+e.common.greenChnl||0,blueChnl:+e.common.blueChn||0},kernings:e.kernings.kerning.map(o=>({first:+o.first||0,second:+o.second||0,amount:+o.amount||0})),distanceField:{fieldType:e.distanceField.fieldType,distanceRange:+e.distanceField.distanceRange||0}};throw new BMFontError("No common data in BMFont file")}catch(o){throw new BMFontError(o.message)}}}export{BMFontXMLParser};