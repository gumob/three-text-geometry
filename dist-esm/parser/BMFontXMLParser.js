import{XMLParser}from"fast-xml-parser";import{BMFontError}from"../error";class BMFontXMLParser{parse(e){try{var n={ignoreAttributes:!1,attributeNamePrefix:""};const c=new XMLParser(n),f=c.parse(e).font;if(!f)throw new BMFontError("No font data in BMFont file");if(!f.pages)throw new BMFontError("No font data in BMFont file");if(!f.chars)throw new BMFontError("No chars data in BMFont file");if(!f.info)throw new BMFontError("No info data in BMFont file");if(!f.common)throw new BMFontError("No common data in BMFont file");let o;o=Array.isArray(f.pages.page)?f.pages.page.map(o=>o.file):[f.pages.page.file];var a=f.chars.char.map(o=>o),i={face:f.info.face,size:+f.info.size||0,bold:+f.info.bold||0,italic:+f.info.italic||0,charset:f.info.charset.split(",").filter(o=>""!=o),unicode:+f.info.unicode||0,stretchH:+f.info.stretchH||0,smooth:+f.info.smooth||0,aa:+f.info.aa||0,padding:f.info.padding.split(",").map(o=>+o),spacing:f.info.spacing.split(",").map(o=>+o),fixedHeight:+f.info.fixedHeight||0,outline:+f.info.outline||0},r={lineHeight:+f.common.lineHeight||0,base:+f.common.base||0,scaleW:+f.common.scaleW||0,scaleH:+f.common.scaleH||0,pages:+f.common.pages||0,packed:+f.common.packed||0,alphaChnl:+f.common.alphaChnl||0,redChnl:+f.common.redChnl||0,greenChnl:+f.common.greenChnl||0,blueChnl:+f.common.blueChn||0},t=f.kernings.kerning.map(o=>({first:+o.first||0,second:+o.second||0,amount:+o.amount||0})),s={fieldType:f.distanceField.fieldType,distanceRange:+f.distanceField.distanceRange||0};return{pages:o,chars:a,info:i,common:r,kernings:t,distanceField:s}}catch(o){throw new BMFontError(o.message)}}}export{BMFontXMLParser};