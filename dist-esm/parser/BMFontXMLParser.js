import{XMLParser}from"fast-xml-parser";import{BMFontError}from"../error";class BMFontXMLParser{parse(o){try{var n=new XMLParser({ignoreAttributes:!1,attributeNamePrefix:""}).parse(o).font;if(!n)throw new BMFontError("No font data in BMFont file");if(!n.pages)throw new BMFontError("No font data in BMFont file");if(!n.chars)throw new BMFontError("No chars data in BMFont file");if(!n.info)throw new BMFontError("No info data in BMFont file");if(!n.common)throw new BMFontError("No common data in BMFont file");let e;e=Array.isArray(n.pages.page)?n.pages.page.map(e=>e.file):[n.pages.page.file];var a=n.chars.char.map(e=>e),i={face:n.info.face,size:+n.info.size||0,bold:+n.info.bold||0,italic:+n.info.italic||0,charset:n.info.charset.split(",").filter(e=>""!=e),unicode:+n.info.unicode||0,stretchH:+n.info.stretchH||0,smooth:+n.info.smooth||0,aa:+n.info.aa||0,padding:n.info.padding.split(",").map(e=>+e),spacing:n.info.spacing.split(",").map(e=>+e),fixedHeight:+n.info.fixedHeight||0,outline:+n.info.outline||0},r={lineHeight:+n.common.lineHeight||0,base:+n.common.base||0,scaleW:+n.common.scaleW||0,scaleH:+n.common.scaleH||0,pages:+n.common.pages||0,packed:+n.common.packed||0,alphaChnl:+n.common.alphaChnl||0,redChnl:+n.common.redChnl||0,greenChnl:+n.common.greenChnl||0,blueChnl:+n.common.blueChn||0},t=n.kernings.kerning.map(e=>({first:+e.first||0,second:+e.second||0,amount:+e.amount||0})),s={fieldType:n.distanceField.fieldType,distanceRange:+n.distanceField.distanceRange||0};return{pages:e,chars:a,info:i,common:r,kernings:t,distanceField:s}}catch(e){throw new BMFontError(e.message)}}}export{BMFontXMLParser};