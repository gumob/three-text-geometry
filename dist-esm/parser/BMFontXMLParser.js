import{XMLParser}from"fast-xml-parser";import{BMFontError}from"~/error";class BMFontXMLParser{parse(e){try{const s=new XMLParser({ignoreAttributes:!1,attributeNamePrefix:""}),c=s.parse(e).font;if(!c)throw new BMFontError("No font data in BMFont file");if(!c.pages)throw new BMFontError("No font data in BMFont file");if(!c.chars)throw new BMFontError("No chars data in BMFont file");if(!c.info)throw new BMFontError("No info data in BMFont file");if(!c.common)throw new BMFontError("No common data in BMFont file");let o;o=Array.isArray(c.pages.page)?c.pages.page.map(o=>o.file):[c.pages.page.file];var n=c.chars.char.map(o=>o),a={face:c.info.face,size:+c.info.size||0,bold:+c.info.bold||0,italic:+c.info.italic||0,charset:c.info.charset.split(",").filter(o=>""!=o),unicode:+c.info.unicode||0,stretchH:+c.info.stretchH||0,smooth:+c.info.smooth||0,aa:+c.info.aa||0,padding:c.info.padding.split(",").map(o=>+o),spacing:c.info.spacing.split(",").map(o=>+o),fixedHeight:+c.info.fixedHeight||0,outline:+c.info.outline||0},i={lineHeight:+c.common.lineHeight||0,base:+c.common.base||0,scaleW:+c.common.scaleW||0,scaleH:+c.common.scaleH||0,pages:+c.common.pages||0,packed:+c.common.packed||0,alphaChnl:+c.common.alphaChnl||0,redChnl:+c.common.redChnl||0,greenChnl:+c.common.greenChnl||0,blueChnl:+c.common.blueChn||0},r=c.kernings.kerning.map(o=>({first:+o.first||0,second:+o.second||0,amount:+o.amount||0})),t={fieldType:c.distanceField.fieldType,distanceRange:+c.distanceField.distanceRange||0};return{pages:o,chars:n,info:a,common:i,kernings:r,distanceField:t}}catch(o){throw new BMFontError(o.message)}}}export{BMFontXMLParser};